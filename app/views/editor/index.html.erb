<div class="container" data-ng-controller='ApplicationController'>
  <div id="editor" data-ng-controller='EditorController'><%= render 'code' %></div>

  <div id="preview" data-ng-controller='PreviewController' ng-bind-html-unsafe="value">
  </div>

  <div id="browser" data-ng-controller='BrowserController'>
    <table>
      <tr>
        <td>Name</td>
        <td>Size</td>
      </tr>
      <tr ng-class-odd="'odd'" ng-class-even="'even'" ng-repeat="file in files">
        <td ng-if="{file.type == 'file'}" ng-click="$emit('fileSelected', file)">
          <a href="#">{{file.name}}</a>
        </td>
        <td ng-if="{file.type == ''}" ng-click="$emit('folderSelected', file)">
          <a href="#">{{file.name}}</a>
        </td>
        <td>{{file.size}}</td>
      </tr>
    </table>
  </div>

  <div id="menu-button" ng-click="$emit('toggleBrowser')">
    <a href="#" >
      <i class='icon-tasks icon-white'></i>
    </a>
  </div>
</div>

<script>
  auth_token = '<%= "#{@current_user[:auth_token]}" %>';
</script>
<%= javascript_include_tag 'lib/ace-builds/src-noconflict/ace' %>
<%= javascript_include_tag 'editor/editor' %>
